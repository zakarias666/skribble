var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function o(e){e.forEach(t)}function r(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let l,a;function u(e,t){return l||(l=document.createElement("a")),l.href=t,e===l.href}function c(t,n,o){t.$$.on_destroy.push(function(t,...n){if(null==t)return e;const o=t.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function i(e,t,n){return e.set(n),t}function d(e,t){e.appendChild(t)}function f(e,t,n){e.insertBefore(t,n||null)}function m(e){e.parentNode&&e.parentNode.removeChild(e)}function p(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function g(e){return document.createElement(e)}function h(e){return document.createTextNode(e)}function $(){return h(" ")}function y(){return h("")}function b(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function v(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function w(e,t){t=""+t,e.data!==t&&(e.data=t)}function x(e,t,n,o){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function k(e){a=e}function _(e){(function(){if(!a)throw new Error("Function called outside component initialization");return a})().$$.on_mount.push(e)}const S=[],E=[];let N=[];const q=[],O=Promise.resolve();let P=!1;function C(e){N.push(e)}const W=new Set;let A=0;function M(){if(0!==A)return;const e=a;do{try{for(;A<S.length;){const e=S[A];A++,k(e),I(e.$$)}}catch(e){throw S.length=0,A=0,e}for(k(null),S.length=0,A=0;E.length;)E.pop()();for(let e=0;e<N.length;e+=1){const t=N[e];W.has(t)||(W.add(t),t())}N.length=0}while(S.length);for(;q.length;)q.pop()();P=!1,W.clear(),k(e)}function I(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(C)}}const J=new Set;let j;function z(){j={r:0,c:[],p:j}}function L(){j.r||o(j.c),j=j.p}function R(e,t){e&&e.i&&(J.delete(e),e.i(t))}function B(e,t,n,o){if(e&&e.o){if(J.has(e))return;J.add(e),j.c.push((()=>{J.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}else o&&o()}function T(e){e&&e.c()}function U(e,n,s,l){const{fragment:a,after_update:u}=e.$$;a&&a.m(n,s),l||C((()=>{const n=e.$$.on_mount.map(t).filter(r);e.$$.on_destroy?e.$$.on_destroy.push(...n):o(n),e.$$.on_mount=[]})),u.forEach(C)}function Y(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];N.forEach((o=>-1===e.indexOf(o)?t.push(o):n.push(o))),n.forEach((e=>e())),N=t}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function F(e,t){-1===e.$$.dirty[0]&&(S.push(e),P||(P=!0,O.then(M)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function G(t,r,s,l,u,c,i,d=[-1]){const f=a;k(t);const p=t.$$={fragment:null,ctx:[],props:c,update:e,not_equal:u,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(f?f.$$.context:[])),callbacks:n(),dirty:d,skip_bound:!1,root:r.target||f.$$.root};i&&i(p.root);let g=!1;if(p.ctx=s?s(t,r.props||{},((e,n,...o)=>{const r=o.length?o[0]:n;return p.ctx&&u(p.ctx[e],p.ctx[e]=r)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](r),g&&F(t,e)),n})):[],p.update(),g=!0,o(p.before_update),p.fragment=!!l&&l(p.ctx),r.target){if(r.hydrate){const e=function(e){return Array.from(e.childNodes)}(r.target);p.fragment&&p.fragment.l(e),e.forEach(m)}else p.fragment&&p.fragment.c();r.intro&&R(t.$$.fragment),U(t,r.target,r.anchor,r.customElement),M()}k(f)}class V{$destroy(){Y(this,1),this.$destroy=e}$on(t,n){if(!r(n))return e;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const e=o.indexOf(n);-1!==e&&o.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const X=[];function D(t,n=e){let o;const r=new Set;function l(e){if(s(t,e)&&(t=e,o)){const e=!X.length;for(const e of r)e[1](),X.push(e,t);if(e){for(let e=0;e<X.length;e+=2)X[e][0](X[e+1]);X.length=0}}}return{set:l,update:function(e){l(e(t))},subscribe:function(s,a=e){const u=[s,a];return r.add(u),1===r.size&&(o=n(l)||e),s(t),()=>{r.delete(u),0===r.size&&o&&(o(),o=null)}}}}const H=D({user:"",gameid:"",rooms:"",roomdata:"",roommax:"",ingame:!1}),K=D([]),Q=D([]);let Z=null;function ee(){return Z||(Z=new WebSocket("ws://localhost:3000"),Z.onopen=()=>{console.log("WebSocket connected")},Z.onmessage=e=>{const t=JSON.parse(e.data);"newStroke"===t.type?K.update((e=>(e.push([]),e))):"draw"===t.type?K.update((e=>(e[e.length-1].push(t.data.point),e))):"drawdata"===t.type?K.set(t.data):"guess"===t.type?Q.update((e=>[...e,t.data])):"chatdata"===t.type?Q.set(t.data.filter(Boolean)):"roomcount"===t.type?H.update((e=>({...e,rooms:t.data}))):"roommax"===t.type?H.update((e=>({...e,roommax:t.data}))):"roomdata"===t.type?H.update((e=>(console.log("Updating roomdata with:",t.data),{...e,roomdata:JSON.stringify(t.data)}))):"start"===t.type?(console.log("Game started in room:",t.data.id),K.set([]),Q.set([]),H.update((e=>({...e,ingame:!0})))):"currentWord"===t.type&&console.log("New word received:",t.data)},Z.onclose=()=>{console.log("WebSocket disconnected"),Z=null},Z.onerror=e=>{console.error("WebSocket error:",e)}),Z}var te=Object.freeze({__proto__:null,drawings:K,guesses:Q,sendMessage:function(e,t){Z&&Z.readyState===WebSocket.OPEN?Z.send(JSON.stringify({type:e,data:t})):console.warn("WebSocket is not connected")},setupWebSocket:ee});function ne(t){let n,o,s,l,a,u,c,i,p,y,x,k,_,S,E,N=t[2].roommax+"";return{c(){n=g("div"),o=g("div"),s=g("span"),l=h("Room "),a=h(t[0]),u=$(),c=g("span"),i=h(t[1]),p=h("/"),y=h(N),x=$(),k=g("button"),_=h("Join"),v(c,"id","count"),v(c,"class","svelte-mgsxg1"),v(o,"id","playercount"),v(o,"class","svelte-mgsxg1"),v(k,"id","join"),v(k,"style",t[3]),v(k,"class","svelte-mgsxg1"),v(n,"id","container"),v(n,"style",t[4]),v(n,"class","svelte-mgsxg1")},m(e,m){f(e,n,m),d(n,o),d(o,s),d(s,l),d(s,a),d(o,u),d(o,c),d(c,i),d(c,p),d(c,y),d(n,x),d(n,k),d(k,_),S||(E=b(k,"click",(function(){r(t[5](t[3]))&&t[5](t[3]).apply(this,arguments)})),S=!0)},p(e,[o]){t=e,1&o&&w(a,t[0]),2&o&&w(i,t[1]),4&o&&N!==(N=t[2].roommax+"")&&w(y,N),8&o&&v(k,"style",t[3]),16&o&&v(n,"style",t[4])},i:e,o:e,d(e){e&&m(n),S=!1,E()}}}function oe(e,t,n){let o;c(e,H,(e=>n(2,o=e))),ee();let{id:r=null}=t,{data:s=null}=t,l="",a="";let u=0;return e.$$set=e=>{"id"in e&&n(0,r=e.id),"data"in e&&n(6,s=e.data)},e.$$.update=()=>{if(64&e.$$.dirty)try{s.players.length?n(1,u=s.players.length):n(1,u=0)}catch(e){n(1,u=0)}70&e.$$.dirty&&(s?(console.log(s),u>=o.roommax||"open"!==s.status?(n(3,l="background-color: grey; cursor: not-allowed;"),n(4,a="border-color: grey;")):(n(3,l=""),n(4,a=""))):(n(3,l=""),n(4,a="")))},[r,u,o,l,a,function(e){if(e)return;let t=prompt("Enter your name");for(;!t||t.length<3;){if(t=prompt("Enter your name (at least 3 characters):"),null===t)return alert("Name input canceled."),null;t.length<3&&alert("Name must be at least 3 characters long.")}i(H,o.username=t,o),i(H,o.gameid=r,o),Promise.resolve().then((function(){return te})).then((({sendMessage:e})=>e("join",{id:r,username:t})))},s]}class re extends V{constructor(e){super(),G(this,e,oe,ne,s,{id:0,data:6})}}function se(e,t,n){const o=e.slice();return o[2]=t[n],o}function le(e){let t,n;return t=new re({props:{id:e[2],data:e[1][e[2]-1]}}),{c(){T(t.$$.fragment)},m(e,o){U(t,e,o),n=!0},p(e,n){const o={};1&n&&(o.id=e[2]),3&n&&(o.data=e[1][e[2]-1]),t.$set(o)},i(e){n||(R(t.$$.fragment,e),n=!0)},o(e){B(t.$$.fragment,e),n=!1},d(e){Y(t,e)}}}function ae(e){let t,n,o,r,s,l,a=Array.from({length:parseInt(e[0].rooms)},ue),c=[];for(let t=0;t<a.length;t+=1)c[t]=le(se(e,a,t));const i=e=>B(c[e],1,1,(()=>{c[e]=null}));return{c(){t=g("home"),n=g("img"),r=$(),s=g("room-container");for(let e=0;e<c.length;e+=1)c[e].c();var e,l,a;u(n.src,o="/uploads/logo.png")||v(n,"src","/uploads/logo.png"),v(n,"id","home-logo"),v(n,"alt",""),v(n,"class","svelte-1ibi2b7"),a="svelte-1ibi2b7",(l="class")in(e=s)?e[l]="boolean"==typeof e[l]&&""===a||a:v(e,l,a),v(t,"class","svelte-1ibi2b7")},m(e,o){f(e,t,o),d(t,n),d(t,r),d(t,s);for(let e=0;e<c.length;e+=1)c[e]&&c[e].m(s,null);l=!0},p(e,[t]){if(3&t){let n;for(a=Array.from({length:parseInt(e[0].rooms)},ue),n=0;n<a.length;n+=1){const o=se(e,a,n);c[n]?(c[n].p(o,t),R(c[n],1)):(c[n]=le(o),c[n].c(),R(c[n],1),c[n].m(s,null))}for(z(),n=a.length;n<c.length;n+=1)i(n);L()}},i(e){if(!l){for(let e=0;e<a.length;e+=1)R(c[e]);l=!0}},o(e){c=c.filter(Boolean);for(let e=0;e<c.length;e+=1)B(c[e]);l=!1},d(e){e&&m(t),p(c,e)}}}const ue=(e,t)=>t+1;function ce(e,t,n){let o;c(e,H,(e=>n(0,o=e)));let r=Array.from({length:o.roommax},(()=>[]));return console.log(r),o.roomdata,e.$$.update=()=>{1&e.$$.dirty&&o.roomdata.length>0&&n(1,r=JSON.parse(o.roomdata)),1&e.$$.dirty&&console.log(o.roomdata)},[o,r]}class ie extends V{constructor(e){super(),G(this,e,ce,ae,s,{})}}function de(e,t,n){const o=e.slice();return o[17]=t[n],o}function fe(e,t,n){const o=e.slice();return o[20]=t[n],o}function me(e){let t,n,o;return{c(){t=g("div"),n=g("strong"),o=h(e[3]),v(n,"class","svelte-u6oqw5"),v(t,"id","word"),v(t,"class","svelte-u6oqw5")},m(e,r){f(e,t,r),d(t,n),d(n,o)},p(e,t){8&t&&w(o,e[3])},d(e){e&&m(t)}}}function pe(e){let t,n=e[1]?.players,o=[];for(let t=0;t<n.length;t+=1)o[t]=he(fe(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=y()},m(e,n){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,n);f(e,t,n)},p(e,r){if(2&r){let s;for(n=e[1]?.players,s=0;s<n.length;s+=1){const l=fe(e,n,s);o[s]?o[s].p(l,r):(o[s]=he(l),o[s].c(),o[s].m(t.parentNode,t))}for(;s<o.length;s+=1)o[s].d(1);o.length=n.length}},d(e){p(o,e),e&&m(t)}}}function ge(e){let t,n;return{c(){t=g("img"),u(t.src,n="/skribble/uploads/brush.png")||v(t,"src","/skribble/uploads/brush.png"),v(t,"id","brush"),v(t,"alt",""),v(t,"class","svelte-u6oqw5")},m(e,n){f(e,t,n)},d(e){e&&m(t)}}}function he(e){let t,n,o,r,s,l,a,u,c,i=e[20].username+"",p=e[20].score+"",y=!0===e[20].brush&&ge();return{c(){t=g("div"),n=g("div"),o=h(i),r=$(),s=g("div"),l=h("Score: "),a=h(p),u=$(),y&&y.c(),c=$(),v(n,"id","player-name"),v(n,"class","svelte-u6oqw5"),v(s,"id","player-score"),v(s,"class","svelte-u6oqw5"),v(t,"id","player-container"),v(t,"class","svelte-u6oqw5")},m(e,i){f(e,t,i),d(t,n),d(n,o),d(t,r),d(t,s),d(s,l),d(s,a),d(t,u),y&&y.m(t,null),d(t,c)},p(e,n){2&n&&i!==(i=e[20].username+"")&&w(o,i),2&n&&p!==(p=e[20].score+"")&&w(a,p),!0===e[20].brush?y||(y=ge(),y.c(),y.m(t,c)):y&&(y.d(1),y=null)},d(e){e&&m(t),y&&y.d()}}}function $e(e){let t,n=e[4],o=[];for(let t=0;t<n.length;t+=1)o[t]=ye(de(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=y()},m(e,n){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,n);f(e,t,n)},p(e,r){if(16&r){let s;for(n=e[4],s=0;s<n.length;s+=1){const l=de(e,n,s);o[s]?o[s].p(l,r):(o[s]=ye(l),o[s].c(),o[s].m(t.parentNode,t))}for(;s<o.length;s+=1)o[s].d(1);o.length=n.length}},d(e){p(o,e),e&&m(t)}}}function ye(e){let t,n,o,r,s,l,a=e[17].username+"",u=e[17].guess+"";return{c(){t=g("div"),n=g("strong"),o=h(a),r=h(":"),s=h("  "),l=h(u),v(n,"class","svelte-u6oqw5"),v(t,"id","guess"),v(t,"class","svelte-u6oqw5")},m(e,a){f(e,t,a),d(t,n),d(n,o),d(n,r),d(t,s),d(t,l)},p(e,t){16&t&&a!==(a=e[17].username+"")&&w(o,a),16&t&&u!==(u=e[17].guess+"")&&w(l,u)},d(e){e&&m(t)}}}function be(t){let n,r,s,l,a,u,c,i,p,h,y,w,k,_,S=t[0]?.brush&&me(t),E=t[1]&&pe(t),N=t[4].length&&$e(t);return{c(){n=g("main"),r=g("div"),s=g("header"),S&&S.c(),l=$(),a=g("players"),E&&E.c(),u=$(),c=g("canvas"),i=$(),p=g("div"),N&&N.c(),h=$(),y=g("input"),v(s,"class","svelte-u6oqw5"),v(a,"class","svelte-u6oqw5"),v(c,"width","500"),v(c,"height","450"),v(c,"class","svelte-u6oqw5"),v(y,"type","text"),v(y,"placeholder","Enter your guess"),v(y,"id","guess-input"),y.disabled=w=t[0]?.brush,x(y,"cursor",t[0]?.brush?"not-allowed":"text"),v(y,"class","svelte-u6oqw5"),v(p,"id","guesses"),v(p,"class","svelte-u6oqw5"),v(r,"id","game"),v(r,"class","svelte-u6oqw5"),v(n,"class","svelte-u6oqw5")},m(e,o){f(e,n,o),d(n,r),d(r,s),S&&S.m(s,null),d(r,l),d(r,a),E&&E.m(a,null),d(r,u),d(r,c),t[12](c),d(r,i),d(r,p),N&&N.m(p,null),d(p,h),d(p,y),k||(_=[b(c,"mousedown",t[5]),b(c,"mousemove",t[6]),b(c,"mouseup",t[7]),b(c,"mouseleave",t[7]),b(y,"keydown",t[13])],k=!0)},p(e,[t]){e[0]?.brush?S?S.p(e,t):(S=me(e),S.c(),S.m(s,null)):S&&(S.d(1),S=null),e[1]?E?E.p(e,t):(E=pe(e),E.c(),E.m(a,null)):E&&(E.d(1),E=null),e[4].length?N?N.p(e,t):(N=$e(e),N.c(),N.m(p,h)):N&&(N.d(1),N=null),1&t&&w!==(w=e[0]?.brush)&&(y.disabled=w),1&t&&x(y,"cursor",e[0]?.brush?"not-allowed":"text")},i:e,o:e,d(e){e&&m(n),S&&S.d(),E&&E.d(),t[12](null),N&&N.d(),k=!1,o(_)}}}function ve(e,t,n){let o,r,s,l,a;c(e,H,(e=>n(10,o=e))),c(e,K,(e=>n(11,r=e))),c(e,Q,(e=>n(4,s=e)));let u=!1,i=null,d=null,f=Array.from({length:o.rooms},(()=>[])),m=[];function p(e){e.trim()?Promise.resolve().then((function(){return te})).then((({sendMessage:t})=>t("guess",{id:o.gameid,username:o.username,guess:e.trim()}))):console.error("Invalid guess input:",e)}_((()=>{a=l.getContext("2d"),a.lineWidth=2,a.strokeStyle="black"}));return e.$$.update=()=>{var t;1539&e.$$.dirty&&(o.roomdata&&n(9,f=JSON.parse(o.roomdata)),console.log("Changed roomdata from",f),f.players?n(1,m=f):n(1,m=f[o.gameid-1]||{players:[]}),console.log("Changed roomdata to",m),n(0,i=m.players.find((e=>e.username===o.username))),n(3,d=m.currentWord),console.log(i)),2048&e.$$.dirty&&(t=r,a&&(a.clearRect(0,0,l.width,l.height),t.forEach((e=>{if(e.length>0){a.beginPath(),a.moveTo(e[0].x,e[0].y);for(let t=1;t<e.length;t++)a.lineTo(e[t].x,e[t].y);a.stroke()}}))))},[i,m,l,d,s,function(e){m?i?i.brush?(u=!0,K.update((e=>(e.push([]),e))),Promise.resolve().then((function(){return te})).then((({sendMessage:e})=>e("newStroke",{id:o.gameid})))):console.error("You are not allowed to draw."):console.error("Current user not found in room data. Cannot draw."):console.error("Room data or players are undefined. Cannot draw.")},function(e){if(!u)return;const t={x:e.offsetX,y:e.offsetY};K.update((e=>(e[e.length-1].push(t),e))),Promise.resolve().then((function(){return te})).then((({sendMessage:e})=>e("draw",{id:o.gameid,point:t})))},function(){u=!1},p,f,o,r,function(e){E[e?"unshift":"push"]((()=>{l=e,n(2,l)}))},e=>{"Enter"===e.key&&(p(e.target.value),e.target.value="")}]}class we extends V{constructor(e){super(),G(this,e,ve,be,s,{})}}function xe(e,t,n){const o=e.slice();return o[6]=t[n],o}function ke(e){let t,n=e[1].players,o=[];for(let t=0;t<n.length;t+=1)o[t]=_e(xe(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=y()},m(e,n){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,n);f(e,t,n)},p(e,r){if(2&r){let s;for(n=e[1].players,s=0;s<n.length;s+=1){const l=xe(e,n,s);o[s]?o[s].p(l,r):(o[s]=_e(l),o[s].c(),o[s].m(t.parentNode,t))}for(;s<o.length;s+=1)o[s].d(1);o.length=n.length}},d(e){p(o,e),e&&m(t)}}}function _e(e){let t,n,o,r,s=e[6].username+"";return{c(){t=g("div"),n=g("div"),o=h(s),r=$(),v(n,"id","player-name"),v(n,"class","svelte-ukwai1"),v(t,"id","player-container"),v(t,"class","svelte-ukwai1")},m(e,s){f(e,t,s),d(t,n),d(n,o),d(t,r)},p(e,t){2&t&&s!==(s=e[6].username+"")&&w(o,s)},d(e){e&&m(t)}}}function Se(t){let n,r,s,l,a,u,c,i,p,y,x,k,_,S=t[1]?.players&&ke(t);return{c(){n=g("lobby"),r=g("players"),S&&S.c(),s=$(),l=g("header"),a=h("Room "),u=h(t[0]),c=$(),i=g("div"),p=g("button"),p.textContent="Start game",y=$(),x=g("button"),x.textContent="✖",v(r,"class","svelte-ukwai1"),v(l,"class","svelte-ukwai1"),v(i,"id","buttons"),v(i,"class","svelte-ukwai1"),v(x,"id","exit"),v(x,"class","svelte-ukwai1"),v(n,"class","svelte-ukwai1")},m(e,o){f(e,n,o),d(n,r),S&&S.m(r,null),d(n,s),d(n,l),d(l,a),d(l,u),d(n,c),d(n,i),d(i,p),d(n,y),d(n,x),k||(_=[b(p,"click",t[3]),b(x,"click",t[2])],k=!0)},p(e,[t]){e[1]?.players?S?S.p(e,t):(S=ke(e),S.c(),S.m(r,null)):S&&(S.d(1),S=null),1&t&&w(u,e[0])},i:e,o:e,d(e){e&&m(n),S&&S.d(),k=!1,o(_)}}}function Ee(e,t,n){let o;c(e,H,(e=>n(5,o=e))),ee();let{id:r=null}=t,s=Array.from({length:o.rooms},(()=>({players:[],status:"open"}))),l=[];return e.$$set=e=>{"id"in e&&n(0,r=e.id)},e.$$.update=()=>{49&e.$$.dirty&&(o.roomdata&&n(4,s=JSON.parse(o.roomdata)),n(1,l=s[r-1]))},[r,l,function(){let e=o.username;console.log({id:r,username:e}),Promise.resolve().then((function(){return te})).then((({sendMessage:t})=>t("leave",{id:r,username:e}))),i(H,o.gameid=null,o),i(H,o.username=null,o)},function(){Promise.resolve().then((function(){return te})).then((({sendMessage:e})=>e("start",{id:r})))},s,o]}class Ne extends V{constructor(e){super(),G(this,e,Ee,Se,s,{id:0})}}function qe(t){let n,o;return n=new ie({}),{c(){T(n.$$.fragment)},m(e,t){U(n,e,t),o=!0},p:e,i(e){o||(R(n.$$.fragment,e),o=!0)},o(e){B(n.$$.fragment,e),o=!1},d(e){Y(n,e)}}}function Oe(e){let t,n,o,r;const s=[Ce,Pe],l=[];function a(e,t){return e[0].ingame?0:1}return t=a(e),n=l[t]=s[t](e),{c(){n.c(),o=y()},m(e,n){l[t].m(e,n),f(e,o,n),r=!0},p(e,r){let u=t;t=a(e),t===u?l[t].p(e,r):(z(),B(l[u],1,1,(()=>{l[u]=null})),L(),n=l[t],n?n.p(e,r):(n=l[t]=s[t](e),n.c()),R(n,1),n.m(o.parentNode,o))},i(e){r||(R(n),r=!0)},o(e){B(n),r=!1},d(e){l[t].d(e),e&&m(o)}}}function Pe(e){let t,n;return t=new Ne({props:{id:e[0].gameid}}),{c(){T(t.$$.fragment)},m(e,o){U(t,e,o),n=!0},p(e,n){const o={};1&n&&(o.id=e[0].gameid),t.$set(o)},i(e){n||(R(t.$$.fragment,e),n=!0)},o(e){B(t.$$.fragment,e),n=!1},d(e){Y(t,e)}}}function Ce(e){let t,n;return t=new we({props:{id:e[0].gameid}}),{c(){T(t.$$.fragment)},m(e,o){U(t,e,o),n=!0},p(e,n){const o={};1&n&&(o.id=e[0].gameid),t.$set(o)},i(e){n||(R(t.$$.fragment,e),n=!0)},o(e){B(t.$$.fragment,e),n=!1},d(e){Y(t,e)}}}function We(e){let t,n,o,r;const s=[Oe,qe],l=[];function a(e,t){return e[0].gameid?0:1}return n=a(e),o=l[n]=s[n](e),{c(){t=g("main"),o.c(),v(t,"class","svelte-1bfyd23")},m(e,o){f(e,t,o),l[n].m(t,null),r=!0},p(e,[r]){let u=n;n=a(e),n===u?l[n].p(e,r):(z(),B(l[u],1,1,(()=>{l[u]=null})),L(),o=l[n],o?o.p(e,r):(o=l[n]=s[n](e),o.c()),R(o,1),o.m(t,null))},i(e){r||(R(o),r=!0)},o(e){B(o),r=!1},d(e){e&&m(t),l[n].d()}}}function Ae(e,t,n){let o;function r(e){o.gameid&&(Promise.resolve().then((function(){return te})).then((({sendMessage:e})=>e("leave",{id:o.gameid,username:o.username}))),e.returnValue="")}return c(e,H,(e=>n(0,o=e))),o.user,ee(),_((()=>(window.addEventListener("beforeunload",r),()=>{window.removeEventListener("beforeunload",r)}))),e.$$.update=()=>{1&e.$$.dirty&&console.log(o.ingame,"SIUIIII")},[o]}return new class extends V{constructor(e){super(),G(this,e,Ae,We,s,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
